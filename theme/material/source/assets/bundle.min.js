function first_load(){theme("chk"),document.getElementById("loading-progress").hidden=1,page_typ=document.getElementById("page_typ").innerText,"index"==page_typ?(document.getElementById("toc_button").hidden=1,document.getElementById("toc_drawer").hidden=1):"article"==page_typ&&(document.getElementById("md-body")&&gentoc("md-body"),document.getElementById("toc_button").hidden=0,document.getElementById("toc_drawer").hidden=0);var e=document.querySelector("body .mdui-container");e.style.minHeight=window.innerHeight-document.body.clientHeight+e.clientHeight+"px",katex_(),highlight(),lazyload(),window.addEventListener("scroll",lazyload)}function pjax_load(){katex_(),highlight(),page_typ=document.getElementById("page_typ").innerText,"index"==page_typ?(document.getElementById("toc_button").hidden=1,document.getElementById("toc_drawer").hidden=1):"article"==page_typ&&(document.getElementById("md-body")&&gentoc("md-body"),document.getElementById("toc_button").hidden=0,document.getElementById("toc_drawer").hidden=0);var e=document.querySelector("body .mdui-container");e.style.minHeight=window.innerHeight-document.body.clientHeight+e.clientHeight+"px"}function totop(){0!=document.body.scrollTop||0!=document.documentElement.scrollTop?(window.scrollBy(0,-(speed+=20)),timeOut=setTimeout("totop()",20)):(clearTimeout(timeOut),document.getElementById("totop").classList.add("mdui-fab-hide"),speed=0)}function getCookie(e){var t,n=e+"=",d=decodeURIComponent(document.cookie),o=d.split(";");for(i in o){for(t=o[i];" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return""}function setCookie(e,t,n=.5){if(getCookie(e)!=t){var d=new Date;d.setTime(d.getTime()+24*n*60*60*1e3);var i="expires="+d.toUTCString();document.cookie=e+"="+t+";"+i+";path=/"}}function addCss(e){var t=document.createElement("link");t.href=e,t.type="text/css",t.rel="stylesheet",document.getElementById("theme_css").appendChild(t)}function theme_night(){setCookie("theme","night"),document.body.classList.add("mdui-theme-layout-dark"),addCss("https://cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/nord.min.css"),addCss("/assets/theme/night.css")}function theme_pink(){setCookie("theme","pink"),addCss("/assets/theme/pink.css")}function theme_blue(){setCookie("theme","blue"),addCss("/assets/theme/blue.css")}function theme_clr(){setCookie("theme","day"),document.getElementById("theme_css").innerHTML="",document.body.classList.remove("mdui-theme-layout-dark")}function theme(e){"chk"==e&&(e=getCookie("theme")),"day"==e?theme_clr():"pink"==e?(theme_clr(),theme_pink()):"blue"==e?(theme_clr(),theme_blue()):"night"==e&&(theme_clr(),theme_night())}function copy(e){var t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}async function katex_(){"undefined"!=typeof katex&&(document.querySelectorAll("code latex").forEach(e=>{var t=document.createElement("span");katex.render(e.innerText,t,{throwOnError:!1}),e.parentElement.replaceWith(t.children[0])}),document.querySelectorAll("code latex_display").forEach(e=>{var t=document.createElement("span");katex.render(e.innerText,t,{displayMode:!0,throwOnError:!1}),e.parentElement.replaceWith(t.children[0])}))}async function highlight(){if("undefined"!=typeof hljs){document.querySelectorAll("pre code").forEach(e=>{if(e.classList.contains("hljs-nb"))e.remove();else{e.innerHTML=e.innerHTML.replace(/\s+$/g,"");var t=e.classList[0],n=e.innerText.length;t&&-1!=t.indexOf("-")?(t=t.split("-"),t=t[t.length-1]):t="text",hljs.highlightBlock(e);for(var d=document.createElement("code"),i="",o=e.innerText.split("\n").length,l=1;l<=o;++l)i+=l+"\n";d.classList.add("hljs","hljs-nb"),d.style.float="left",d.innerText=i,e.parentElement.insertBefore(d,e);var a=document.createElement("div"),c=document.createElement("div"),r=document.createElement("div");c.classList.add("hljs-cb"),c.setAttribute("data-title","复制"),c.addEventListener("click",function(){copy(this.parentElement.parentElement.innerText),this.setAttribute("data-title","复制成功"),setTimeout(function(e){e.setAttribute("data-title","复制")},1e3,this),mdui.snackbar({message:"复制成功!",position:"top"})}),r.classList.add("hljs-fd"),r.setAttribute("data-title","折叠"),r.addEventListener("click",function(){this.parentElement.parentElement.parentElement.hidden=1,this.parentElement.parentElement.parentElement.previousElementSibling.hidden=0});var s=document.createElement("div");s.classList.add("hljs-lang"),s.setAttribute("data-title",t),a.classList.add("hljs-bar"),a.append(s),a.append(r),a.append(c),e.append(a);var m=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),p=document.createElement("div");m.hidden=1,m.addEventListener("click",function(){this.hidden=1,this.nextElementSibling.hidden=0}),u.classList.add("hljs-fd"),u.setAttribute("data-title","展开"),u.classList.add("hljs-fd"),h.classList.add("hljs-lang"),h.setAttribute("data-title",t),p.classList.add("hljs-len"),p.setAttribute("data-title",n),m.append(h),m.append(p),m.append(u),e.parentElement.parentElement.insertBefore(m,e.parentElement)}});var e=document.createElement("style");e.innerHTML=[".hljs{position:relative;}",".hljs-bar{display:none;width:fit-content;position:absolute;top:0;right:0;}",".hljs:hover .hljs-bar{display:block;}",".hljs-cb,.hljs-fd,.hljs-lang,.hljs-len{","display: inline-block;","width: fit-content;","color: #fff;","padding: 2px 5px;","cursor: pointer;","}",".hljs-cb{","background-color: #f7a4b9;","}",".hljs-fd{","background-color: #66ccff;","}",".hljs-lang{","background-color: #6f87ff;","}",".hljs-len{","background-color: #f7a4b9;","}",".hljs-fd:after,.hljs-cb:after,.hljs-lang:after,.hljs-len:after{","content: attr(data-title)","}",".hljs-nb{color: #bbb !important;}"].join(""),document.getElementsByTagName("head")[0].appendChild(e)}}function gentoc(e){var t,n,d=document.getElementById("toc"),i=document.getElementById(e),o=i.firstElementChild;for(d.innerHTML="";o;){if("H1"==o.tagName){o.setAttribute("id",o.textContent);var l=document.createElement("a");l.textContent=o.textContent,l.href="#"+o.id,t=document.createElement("ul");var a=document.createElement("li");a.classList.add("mdui-text-truncate"),a.style.marginBottom="16px",a.appendChild(l),a.appendChild(t),d.appendChild(a)}else if("H2"==o.tagName){o.setAttribute("id",o.textContent),t||(t=document.createElement("ul"),d.appendChild(t));l=document.createElement("a");l.textContent=o.textContent,l.href="#"+o.id,n=document.createElement("ul");a=document.createElement("li");a.classList.add("mdui-text-truncate"),a.appendChild(l),a.appendChild(n),t.appendChild(a)}else if("H3"==o.tagName){o.setAttribute("id",o.textContent),n||(n=document.createElement("ul"),d.appendChild(n));l=document.createElement("a");l.textContent=o.textContent,l.href="#"+o.id;a=document.createElement("li");a.classList.add("mdui-text-truncate"),a.appendChild(l),n.appendChild(a)}if(o=o.nextElementSibling,!o)break}}function copylink(){copy(window.location.href),mdui.snackbar({message:"复制成功!",position:"top"})}function lazyload(){var e=document.getElementsByTagName("img"),t=e.length,n=document.documentElement.clientHeight,d=document.documentElement.scrollTop||document.body.scrollTop;for(let o=0;o<t&&e[o].offsetTop<n+d;++o){var i=e[o].getAttribute("data-src");null!=i&&e[o].src!=i&&(e[o].src=e[o].getAttribute("data-src"))}}window.addEventListener("load",e=>{first_load()});var timeOut,speed=0;window.onscroll=function(){document.documentElement.scrollTop>=300?document.getElementById("totop").classList.remove("mdui-fab-hide"):document.getElementById("totop").classList.add("mdui-fab-hide")};