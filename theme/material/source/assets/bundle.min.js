function first_load(){theme("chk"),document.getElementById("loading-progress").hidden=1,lazyload(),window.addEventListener("scroll",lazyload),drawer=new mdui.Drawer("#drawer"),toc_drawer=new mdui.Drawer("#toc_drawer"),search_dialog=new mdui.Dialog("#search_dialog",{overlay:!1}),page_typ=document.getElementById("page_typ").innerText,"index"==page_typ?(document.getElementById("toc_button").hidden=1,document.getElementById("toc_drawer").hidden=1):"article"==page_typ&&(document.getElementById("md-body")&&gentoc("md-body"),document.getElementById("toc_button").hidden=0,document.getElementById("toc_drawer").hidden=0);var e=document.querySelector("body .mdui-container");e.style.minHeight=window.innerHeight-document.body.clientHeight+e.clientHeight+"px",katex_(),highlight()}function pjax_load(){katex_(),highlight(),page_typ=document.getElementById("page_typ").innerText,"index"==page_typ?(document.getElementById("toc_button").hidden=1,document.getElementById("toc_drawer").hidden=1):"article"==page_typ&&(document.getElementById("md-body")&&gentoc("md-body"),document.getElementById("toc_button").hidden=0,document.getElementById("toc_drawer").hidden=0);var e=document.querySelector("body .mdui-container");e.style.minHeight=window.innerHeight-document.body.clientHeight+e.clientHeight+"px"}function totop(){0!=document.body.scrollTop||0!=document.documentElement.scrollTop?(window.scrollBy(0,-(speed+=20)),timeOut=setTimeout("totop()",20)):(clearTimeout(timeOut),document.getElementById("totop").classList.add("mdui-fab-hide"),speed=0)}function getCookie(e){var t,n=e+"=",d=decodeURIComponent(document.cookie),o=d.split(";");for(i in o){for(t=o[i];" "==t.charAt(0);)t=t.substring(1);if(0==t.indexOf(n))return t.substring(n.length,t.length)}return""}function setCookie(e,t,n=.5){if(getCookie(e)!=t){var d=new Date;d.setTime(d.getTime()+24*n*60*60*1e3);var o="expires="+d.toUTCString();document.cookie=e+"="+t+";"+o+";path=/"}}function theme_night(){document.querySelector("html").classList.add("mdui-theme-layout-dark"),document.querySelector("body").classList.add("mdui-theme-layout-dark");var e=document.getElementById("theme_css"),t=document.createElement("link"),n=document.createElement("link");t.href="//cdn.jsdelivr.net/gh/highlightjs/cdn-release/build/styles/nord.min.css",t.type="text/css",t.rel="stylesheet",e.appendChild(t),n.href="/assets/theme/night.css",n.type="text/css",n.rel="stylesheet",e.appendChild(n)}function theme_pink(){setCookie("theme","pink");var e=document.createElement("link");e.href="/assets/theme/pink.css",e.type="text/css",e.rel="stylesheet",document.getElementById("theme_css").appendChild(e)}function theme_blue(){setCookie("theme","blue");var e=document.createElement("link");e.href="/assets/theme/blue.css",e.type="text/css",e.rel="stylesheet",document.getElementById("theme_css").appendChild(e)}function theme_clr(){document.getElementById("theme_css").innerHTML="",node=document.querySelector("html"),node.classList.contains("mdui-theme-layout-dark")&&node.classList.remove("mdui-theme-layout-dark"),node=document.querySelector("body"),node.classList.contains("mdui-theme-layout-dark")&&node.classList.remove("mdui-theme-layout-dark")}function theme(e){"chk"==e&&(e=getCookie("theme")),"day"==e&&(setCookie("theme","day"),theme_clr()),"pink"==e&&(setCookie("theme","pink"),theme_clr(),theme_pink()),"blue"==e&&(setCookie("theme","blue"),theme_clr(),theme_blue()),"night"==e&&(setCookie("theme","night"),theme_clr(),theme_night())}function copy(e){var t=document.createElement("textarea");t.textContent=e,document.body.appendChild(t),t.select(),document.execCommand("copy"),t.remove()}function katex_(){document.querySelectorAll("code latex").forEach(e=>{var t=document.createElement("span");katex.render(e.innerText,t,{throwOnError:!1}),e.parentElement.replaceWith(t.children[0])}),document.querySelectorAll("code latex_display").forEach(e=>{var t=document.createElement("span");katex.render(e.innerText,t,{displayMode:!0,throwOnError:!1}),e.parentElement.replaceWith(t.children[0])})}function highlight(){document.querySelectorAll("pre code").forEach(e=>{if(e.classList.contains("hljs-nb"))e.remove();else{e.innerHTML=e.innerHTML.trim();var t=e.classList[0],n=e.innerText.length;try{t=t.split("-"),t=t[t.length-1]}catch{t="text"}hljs.highlightBlock(e);for(var d=document.createElement("code"),o="",l=e.innerText.split("\n").length,i=1;i<=l;++i)o+=i+"\n";d.classList.add("hljs","hljs-nb"),d.style.float="left",d.innerText=o,e.parentElement.insertBefore(d,e);var a=document.createElement("div"),c=document.createElement("div"),r=document.createElement("div");c.classList.add("hljs-cb"),c.setAttribute("data-title","复制"),c.addEventListener("click",function(){copy(this.parentElement.parentElement.innerText),this.setAttribute("data-title","复制成功"),setTimeout(function(e){e.setAttribute("data-title","复制")},1e3,this),mdui.snackbar({message:"复制成功!",position:"top"})}),r.classList.add("hljs-fd"),r.setAttribute("data-title","折叠"),r.addEventListener("click",function(){this.parentElement.parentElement.parentElement.hidden=1,this.parentElement.parentElement.parentElement.previousElementSibling.hidden=0});var s=document.createElement("div");s.classList.add("hljs-lang"),s.setAttribute("data-title",t),a.classList.add("hljs-bar"),a.append(s),a.append(r),a.append(c),e.append(a);var m=document.createElement("div"),u=document.createElement("div"),h=document.createElement("div"),p=document.createElement("div");m.hidden=1,m.addEventListener("click",function(){this.hidden=1,this.nextElementSibling.hidden=0}),u.classList.add("hljs-fd"),u.setAttribute("data-title","展开"),u.classList.add("hljs-fd"),h.classList.add("hljs-lang"),h.setAttribute("data-title",t),p.classList.add("hljs-len"),p.setAttribute("data-title",n),m.append(h),m.append(p),m.append(u),e.parentElement.parentElement.insertBefore(m,e.parentElement)}});var e=document.createElement("style");e.type="text/css",e.innerHTML=[".hljs{position:relative;}",".hljs-bar{display:none;width:fit-content;position:absolute;top:0;right:0;}",".hljs:hover .hljs-bar{display:block;}",".hljs-cb,.hljs-fd,.hljs-lang,.hljs-len{","display: inline-block;","width: fit-content;","color: #fff;","padding: 2px 5px;","cursor: pointer;","}",".hljs-cb{","background-color: #F7A4B9;","}",".hljs-fd{","background-color: #66ccff;","}",".hljs-lang{","background-color: #39c5bb;","}",".hljs-len{","background-color: #f7a4b9;","}",".hljs-fd:after,.hljs-cb:after,.hljs-lang:after,.hljs-len:after{","content: attr(data-title)","}",".hljs-nb{color: #bbb !important;}"].join(""),document.getElementsByTagName("head")[0].appendChild(e)}function gentoc(e){var t,n,d=document.getElementById("toc"),o=document.getElementById(e),l=o.firstElementChild;for(d.innerHTML="";l;){if("H1"==l.tagName){l.setAttribute("id",l.textContent);var i=document.createElement("a");i.textContent=l.textContent,i.href="#"+l.id,t=document.createElement("ul");var a=document.createElement("li");a.classList.add("mdui-text-truncate"),a.style.marginBottom="16px",a.appendChild(i),a.appendChild(t),d.appendChild(a)}else if("H2"==l.tagName){l.setAttribute("id",l.textContent),t||(t=document.createElement("ul"),d.appendChild(t));i=document.createElement("a");i.textContent=l.textContent,i.href="#"+l.id,n=document.createElement("ul");a=document.createElement("li");a.classList.add("mdui-text-truncate"),a.appendChild(i),a.appendChild(n),t.appendChild(a)}else if("H3"==l.tagName){l.setAttribute("id",l.textContent),n||(n=document.createElement("ul"),d.appendChild(n));i=document.createElement("a");i.textContent=l.textContent,i.href="#"+l.id;a=document.createElement("li");a.classList.add("mdui-text-truncate"),a.appendChild(i),n.appendChild(a)}if(l=l.nextElementSibling,!l)break}}function copylink(){copy("window.location.href"),mdui.snackbar({message:"复制成功!",position:"top"})}function lazyload(){var e=document.getElementsByTagName("img"),t=e.length,n=document.documentElement.clientHeight,d=document.documentElement.scrollTop||document.body.scrollTop;for(let l=0;l<t&&e[l].offsetTop<n+d;++l){var o=e[l].getAttribute("data-src");null!=o&&e[l].src!=o&&(e[l].src=e[l].getAttribute("data-src"))}}window.addEventListener("load",e=>{first_load()}),document.onkeydown=function(e){var t=e.keyCode||e.which||e.charCode,n=e.ctrlKey||e.metaKey;n&&(39==t&&document.getElementById("nxt_button").click(),37==t&&document.getElementById("pre_button").click())};var timeOut,speed=0;window.onscroll=function(){document.documentElement.scrollTop>=300?document.getElementById("totop").classList.remove("mdui-fab-hide"):document.getElementById("totop").classList.add("mdui-fab-hide")};